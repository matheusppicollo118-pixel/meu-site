<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Direciona Business</title>
<style>
body {font-family:'Poppins',sans-serif; margin:0; background:#f8fafc; color:#1e293b;}
header, main, footer {max-width:960px; margin:auto; padding:20px;}
header{text-align:center; margin-top:50px;}
h1{color:#0B2545;}
p{color:#475569;}
input, select{padding:12px; font-size:1rem; border-radius:8px; border:1px solid #cbd5e1; width:100%; margin-bottom:10px;}
button{background:#2563eb; color:#fff; border:none; padding:12px 20px; border-radius:8px; cursor:pointer; margin-top:5px;}
button:hover{background:#1e40af;}
.sugg{background:#fff; border-radius:10px; padding:15px; margin-bottom:12px; box-shadow:0 4px 12px rgba(0,0,0,0.05);}
.modal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center;}
.modal-content{background:#fff; padding:30px; border-radius:12px; max-width:500px; width:90%; text-align:center;}
.close{float:right; font-size:1.5rem; cursor:pointer;}
</style>
</head>
<body>

<header>
<h1 id="headline"></h1>
<p id="subheadline"></p>
<button id="ctaButton">Gerar ideias</button>
</header>

<main>
<form id="segmentForm" style="display:none;">
<input type="text" id="nome" placeholder="Seu nome (opcional)">
<input type="email" id="email" placeholder="Seu e-mail" required>
<input type="text" id="segmento" placeholder="Segmento (ex: moda, padaria, marketing digital)" required>
<select id="modelo">
<option value="online">Online</option>
<option value="fisico">Loja física</option>
<option value="servico">Serviços</option>
<option value="remoto">Remoto / Digital</option>
</select>
<button type="submit">Gerar minhas ideias</button>
</form>

<div id="result"></div>
</main>

<div id="modalPlanos" class="modal">
<div class="modal-content">
<span class="close" id="closeModal">&times;</span>
<h2>Planos Mensais</h2>
<p>Receba dicas exclusivas e atualizações do seu segmento.</p>
<button onclick="alert('Integração pagamento aqui')">Starter - R$49/mês</button>
<button onclick="alert('Integração pagamento aqui')">Growth - R$99/mês</button>
<button onclick="alert('Integração pagamento aqui')">Pro - R$149/mês</button>
</div>
</div>

<footer>© 2025 Direciona Business</footer>

<script>
// --- Teste A/B ---
const versions={A:{headline:"Descubra as ideias certas para o seu negócio — em 60 segundos.",subheadline:"Preencha seu segmento e receba ideias de marketing, posicionamento e crescimento."},B:{headline:"Não sabe por onde começar? Nós te mostramos o caminho.",subheadline:"Acesse estratégias práticas, testadas por grandes empresários."}};
const chosen=Math.random()<0.5?"A":"B";
const content=versions[chosen];
document.getElementById("headline").textContent=content.headline;
document.getElementById("subheadline").textContent=content.subheadline;

// --- CTA ---
const cta=document.getElementById("ctaButton");
const form=document.getElementById("segmentForm");
cta.addEventListener("click",()=>{cta.style.display="none"; form.style.display="flex";});

// --- Templates ---
const TEMPLATES={
padaria:[{title:"Marketing local",body:"Ofereça cupons de 1ª compra e promova entregas via WhatsApp."},{title:"Posicionamento",body:"Destaque 'pães artesanais frescos às 6h' nas redes sociais."},{title:"Escala",body:"Venda kits semanais por assinatura."}],
moda:[{title:"Marketing por coleção",body:"Lance mini-coleções trimestrais com campanhas digitais."},{title:"Posicionamento",body:"Escolha um nicho específico e use provas sociais."},{title:"Escala",body:"Parcerias com influenciadores e kits de revenda."}],
padrao:[{title:"Marketing rápido",body:"Use catálogo no WhatsApp e anúncios direcionados."},{title:"Posicionamento claro",body:"Descreva benefícios tangíveis ao cliente."},{title:"Escala inicial",body:"Crie um produto mínimo viável e repita semanalmente."}]
};

form.addEventListener("submit",function(e){
e.preventDefault();
const nome=document.getElementById("nome").value.trim();
const email=document.getElementById("email").value.trim();
const segmento=document.getElementById("segmento").value.trim().toLowerCase();
const modelo=document.getElementById("modelo").value;
if(!email||!segmento){alert("Preencha e-mail e segmento.");return;}
let chave='padrao';
if(segmento.includes('padaria')||segmento.includes('pão')) chave='padaria';
else if(segmento.includes('moda')) chave='moda';
const arr=TEMPLATES[chave]||TEMPLATES['padrao'];
const result=document.getElementById("result");
result.innerHTML=<div style="margin-bottom:15px;">Olá ${nome||'empreendedor'}, aqui estão suas 3 ideias para <strong>${segmento}</strong>:</div>;
arr.forEach(s=>{
const el=document.createElement("div");
el.className="sugg";
el.innerHTML=<strong>${s.title}</strong>: ${s.body};
result.appendChild(el);
});
localStorage.setItem("ab_version",chosen);

// --- Envio de e-mail via backend ---
fetch('/api/send',{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({nome,email,segmento,modelo,ab_version:localStorage.getItem("ab_version")})
})
.then(res=>res.json())
.then(data=>{alert("Suas ideias foram enviadas por e-mail!"); document.getElementById("modalPlanos").style.display="flex";})
.catch(err=>alert("Erro ao enviar e-mail. Tente novamente."));
});

// --- Modal ---
const modal=document.getElementById("modalPlanos");
const closeModal=document.getElementById("closeModal");
closeModal.onclick=()=>{modal.style.display="none";}
window.onclick=(e)=>{if(e.target==modal) modal.style.display="none";}
</script>

</body>
</html>